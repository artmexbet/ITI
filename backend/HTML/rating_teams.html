<!-- replace 1 -->

<center>
    <h1>Рейтинг команд</h1>
    <div class="row col-12 justify-content-center">
        <div class="">
            <table width="100%" border="1" class="js-table-color-place" id="sorted-table" cellpadding=10>
                <thead><tr>
                    <td width="10%">Место</td>
                    <td width="30%">Команда</td>
                    {% for subject in team_subjects %}
                        <td width="5%">{{ team_subjects[subject] }}</td>
                    {% endfor %}
                    <td width="30%">Сумма</td>
                </tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    {% for team in teams %}
        <div class="w-100"></div>
        <h2>{{ teams[team] }}</h2>
        <table width="100%" border="1" class="???" cellpadding="10">
            <thead><tr>
                <td width="10%">Класс</td>
                <td width="10%">Фамилия</td>
                <td width="10%">Имя</td>
                {% for subject in ind_subjects %}
                    <td width="10%">{{ ind_subjects[subject] }}</td>
                {% endfor %}
                <td width="10%">Сумма</td>
            </tr></thead>
            <tbody>
                {% for student in team_student[team] %}
                    <tr>
                        <td>{{ students[student][2] }}</td>
                        <td>{{ students[student][0] }}</td>
                        <td>{{ students[student][1] }}</td>
                        {% set ns = namespace(sum=0) %}
                        {% for subject in ind_subjects %}
                            {% if student in student_results and subject in student_results[student] %}
                                <td>{{ student_results[student][subject][0] }}</td>
                                {% set ns.sum = ns.sum + student_results[student][subject][0] %}
                            {% else %} <td>-</td>
                            {% endif %}
                        {% endfor %}
                        <td>{{ ns.sum }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endfor %}
</center>
<script>
    let results = {{ team_results | tojson }}, teams = {{ teams | tojson }}, subjects = {{ team_subjects | tojson }};
    let tableData = generateTeamsTableData();
    filterResults(null, -1, false);
    let cols = [];
    for(let row of tableData) {
        for(let i = 2; i < row.length; ++i) cols.push(i);
    }
    colorizePlacesCols(cols);
</script>

<!-- replace 2 -->
