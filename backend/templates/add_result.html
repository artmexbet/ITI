<!-- login required -->
{% extends "page4.html" %}

{% block header %}
<a href="../../main.html">ИТИ-{{year}}</a>
/
<a href="../../{{h_type_1}}_tours.html">{{h_type_2}}</a>
/
<a href="../{{subject}}.html">{{h_sub_name}}</a>
/
Результаты
{% endblock %}

{% block content %}
<div class="row col-12 justify-content-center">
	<div class="col t-3"><center>
		<h1>Максимальный балл</h1>
		<form action="max_score" method="post">
			<p>5 класс: <input type="text" name="score_5" value="{{s5}}"></p>
			<p>6 класс: <input type="text" name="score_6" value="{{s6}}"></p>
			<p>7 класс: <input type="text" name="score_7" value="{{s7}}"></p>
			<p>8 класс: <input type="text" name="score_8" value="{{s8}}"></p>
			<p>9 класс: <input type="text" name="score_9" value="{{s9}}"></p>
			{% if error1 %} <p><font color="red">[ {{ error1 }} ]</font></p>
			{% endif %}
			<p>Если оставить поле пустыми (или поставить 0), то данного предмета для данного класса не будет.</p>
			<input type="submit" value="Сохранить">
		</form>
	</center></div>
	<div class="col t-3"><center>
		<h1>Сохранение результатов</h1>
		<form action="save_result" method="post">
			<p>Код участника: <input type="text" name="code"></p>
			<p>Результат: <input type="text" name="result"></p>
			{% if error2 %} <p><font color="red">[ {{ error2 }} ]</font></p>
			{% endif %}
			<p>Введите баллы за все задачи. Разделитель между числами может быть любым; десятичный разделитель — ',' или '.'.
				Симолы 'х', 'Х', 'x', 'X' распознаются как задачи, к которым участник не писал решение.</p>
			<input type="submit" value="Сохранить">
		</form>
	</center></div>

	{% if not current_user.is_anonymous and current_user.can_do(-1) %}
	<div class="col t-3"><center>
		<h1><a href="share_results">Публикация результатов</a></h1>
		<p>После публикаяии результатов они станут доступны для просмотра всем.</p>
		<p>Не рекомендуется публиковать результаты до проверки всех работ по данному предмету.</p>
		{% if error3 %} <p><font color="red">[ {{ error3 }} ]</font></p>
		{% endif %}
		<br>
		<h1>Удаление результатов</h1>
		<form action="delete_result" method="post">
			<p>Код участника: <input type="text" name="code"></p>
			<input type="submit" value="Удалить">
			{% if error5 %} <p><font color="red">[ {{ error5 }} ]</font></p>
			{% endif %}
		</form>
	</center></div>
	{% endif %}

	<div class="col t-3"><center>
		<h1>Загрузка файлов</h1>
		<form action="main_uploader" method="post" enctype=multipart/form-data>
			<p>Файл: <input type="file" name="file"></p>
			<p><input type="checkbox" id="is_sol" name="is_sol" value="is_sol" onclick="file_type();">Решение школьника</p>
			<div id="form_1">
				<p>Тип:
					<input type="checkbox" name="type" value="task">Задания
					<input type="checkbox" name="type" value="solution">Решения
					<input type="checkbox" name="type" value="criteria">Критерии
				</p>
				<p>Класс:
					<input type="checkbox" name="class_n" value="5">5
					<input type="checkbox" name="class_n" value="6">6
					<input type="checkbox" name="class_n" value="7">7
					<input type="checkbox" name="class_n" value="8">8
					<input type="checkbox" name="class_n" value="9">9
				</p>
			</div>
			<div id="form_2">
				<p>Код школьника: <input type="text" name="code"></p>
				<p>Описание: <input type="text" name="description"></p>
			</div>
			<input type="submit" value="Загрузить">
		</form>
		<br>
		<h1>Удаление файлов:</h1>
		<form action="main_deleter" method="post">
			<p><input type="checkbox" id="is_sol2" name="is_sol2" value="is_sol2" onclick="file_type2();">Решение школьника</p>
			<div id="form_3">
				<p>Тип:
					<input type="checkbox" name="type" value="task">Задания
					<input type="checkbox" name="type" value="solution">Решения
					<input type="checkbox" name="type" value="criteria">Критерии
				</p>
				<p>Класс:
					<input type="checkbox" name="class_n" value="5">5
					<input type="checkbox" name="class_n" value="6">6
					<input type="checkbox" name="class_n" value="7">7
					<input type="checkbox" name="class_n" value="8">8
					<input type="checkbox" name="class_n" value="9">9
				</p>
			</div>
			<div id="form_4">
				<p>Код школьника: <input type="text" name="code"></p>
				<p>Описание: <input type="text" name="description"></p>
			</div>
			<p>Расширение файла: <input type="text" name="extension"></p>
			<input type="submit" value="Удалить">
		</form>
		{% if error4 %} <p><font color="red">[ {{ error4 }} ]</font></p>
		{% endif %}
	</center></div>
	<div class="col td-2"><center>
		<h1>Список апеллирующих</h1>
		<table width="100%" border="1">
			<tr>
				<td width="5%">ID</td>
				<td width="15%">Фамилия</td>
				<td width="15%">Имя</td>
				<td width="5%">Класс</td>
				<td width="10%">Номер задачи</td>
				<td width="50%">Причина апелляции</td>
			</tr>
			{% for x in appeals %}
			<tr>
				<td>{{ x[0].student }}</td>
				<td>{{ x[1].name_1 }}</td>
				<td>{{ x[1].name_2 }}</td>
				<td>{{ x[1].class_name() }}</td>
				<td>{{ x[0].tasks }}</td>
				<td>{{ x[0].description }}</td>
			</tr>
			{% endfor %}
		</table>
	</center></div>
</div>
<br>
{% if top %}
<center><h1>Лучшие результаты</h1></center>
<br>
<div class="row col-12 justify-content-center">
	<div class="col t-4"><center>
		<h2>5 класс</h2>
		<table width="100%" border="1">
			<tr>
				<td width="10%">Место</td>
				<td width="10%">ID</td>
				<td width="10%">Балл</td>
			</tr>
			{% for x in top[0] %}
			<tr class="p{{ x[0] }}">
				<td>{{ x[0] }}</td>
				<td>{{ x[1] }}</td>
				<td>{{ x[2] }}</td>
			</tr>
			{% endfor %}
		</table>
	</center></div>
	<div class="col t-4"><center>
		<h2>6 класс</h2>
		<table width="100%" border="1">
			<tr>
				<td width="10%">Место</td>
				<td width="10%">ID</td>
				<td width="10%">Балл</td>
			</tr>
			{% for x in top[1] %}
			<tr class="p{{ x[0] }}">
				<td>{{ x[0] }}</td>
				<td>{{ x[1] }}</td>
				<td>{{ x[2] }}</td>
			</tr>
			{% endfor %}
		</table>
	</center></div>
	<div class="col t-4"><center>
		<h2>7 класс</h2>
		<table width="100%" border="1">
			<tr>
				<td width="10%">Место</td>
				<td width="10%">ID</td>
				<td width="10%">Балл</td>
			</tr>
			{% for x in top[2] %}
			<tr class="p{{ x[0] }}">
				<td>{{ x[0] }}</td>
				<td>{{ x[1] }}</td>
				<td>{{ x[2] }}</td>
			</tr>
			{% endfor %}
		</table>
	</center></div>
	<div class="col t-4"><center>
		<h2>8 класс</h2>
		<table width="100%" border="1">
			<tr>
				<td width="10%">Место</td>
				<td width="10%">ID</td>
				<td width="10%">Балл</td>
			</tr>
			{% for x in top[3] %}
			<tr class="p{{ x[0] }}">
				<td>{{ x[0] }}</td>
				<td>{{ x[1] }}</td>
				<td>{{ x[2] }}</td>
			</tr>
			{% endfor %}
		</table>
	</center></div>
	<div class="col t-4"><center>
		<h2>9 класс</h2>
		<table width="100%" border="1">
			<tr>
				<td width="10%">Место</td>
				<td width="10%">ID</td>
				<td width="10%">Балл</td>
			</tr>
			{% for x in top[4] %}
			<tr class="p{{ x[0] }}">
				<td>{{ x[0] }}</td>
				<td>{{ x[1] }}</td>
				<td>{{ x[2] }}</td>
			</tr>
			{% endfor %}
		</table>
	</center></div>
</div>
{% endif %}
<script>file_type();file_type2();</script>
{% endblock %}
