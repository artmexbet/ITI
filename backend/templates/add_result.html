<!-- login required -->
{% extends "page4.html" %}
{% block content %}

<table width="100%">
	<tr>
		<td>
			<font size="3">
				<a href="../../main.html">ИТИ-{{year}}</a>
				/
				<a href="../../{{h_type_1}}_tours.html">{{h_type_2}}</a>
				/
				<a href="../{{subject}}.html">{{h_sub_name}}</a>
				/
				Результаты
			</font>
		</td>
	</tr>
</table>

<center><table width="90%">
	<tr>
		<td width="30%" />
		<td width="5%" />
		<td width="30%" />
		<td width="5%" />
		<td width="30%" />
	</tr>
	<tr>
		<td valign="top"><center>
			<h1>Максимальный балл</h1>
			<form action="max_score" method="post">
				<p>5 класс: <input type="text" name="score_5" value="{{s5}}"></p>
				<p>6 класс: <input type="text" name="score_6" value="{{s6}}"></p>
				<p>7 класс: <input type="text" name="score_7" value="{{s7}}"></p>
				<p>8 класс: <input type="text" name="score_8" value="{{s8}}"></p>
				<p>9 класс: <input type="text" name="score_9" value="{{s9}}"></p>
				{% if error1 %} <p><font color="red">[ {{ error1 }} ]</font></p>
				{% endif %}
				<p>Если оставить поле пустыми (или поставить 0), то данного предмета для данного класса не будет.</p>
				<input type="submit" value="Сохранить">
			</form>
		</center></td>
		<td/>
		<td valign="top"><center>
			<h1>Сохранение результатов</h1>
			<form action="save_result" method="post">
				<p>Код участника: <input type="text" name="code"></p>
				<p>Результат: <input type="text" name="result"></p>
				{% if error2 %} <p><font color="red">[ {{ error2 }} ]</font></p>
				{% endif %}
				<p>Введите баллы за все задачи. Разделитель может быть любым. Симолы 'х', 'Х', 'x', 'X' распазнаются как
				задачи, к которым участник не писал решение.</p>
				<input type="submit" value="Сохранить">
			</form>
		</center></td>
		<td/>
		<td valign="top"><center>
			{% if not current_user.is_anonymous and current_user.can_do(-1) %}
			<h1><a href="share_results">Публикация результатов</a></h1>
			<p>После публикаяии результатов они станут доступны для просмотра всем.</p>
			<p>Не рекомендуется публиковать результаты до проверки всех работ по данному предмету.</p>
			{% if error3 %} <p><font color="red">[ {{ error3 }} ]</font></p>
			{% endif %}
			{% endif %}
		</center></td>
	</tr>
</table>
<table width="90%">
	<tr>
		<td width="30%" />
		<td width="5%" />
		<td width="65%" />
	</tr>
	<tr>
		<td valign="top"><center>
			<h1>Загрузка файлов</h1>
			<form action="main_uploader" method="post" enctype=multipart/form-data>
				<p>Файл: <input type="file" name="file"></p>
				<p>Тип:
					<input type="checkbox" name="type" value="task">Задания
					<input type="checkbox" name="type" value="solution">Решения
					<input type="checkbox" name="type" value="criteria">Критерии
				</p>
				<p>Класс:
					<input type="checkbox" name="class_n" value="5">5
					<input type="checkbox" name="class_n" value="6">6
					<input type="checkbox" name="class_n" value="7">7
					<input type="checkbox" name="class_n" value="8">8
					<input type="checkbox" name="class_n" value="9">9
				</p>
				<input type="submit" value="Загрузить">
			</form>
		</center></td>
		<td />
		<td valign="top"><center>
			<h1>Список апеллирующих</h1>
			<table width="100%" border="1">
				<tr>
					<td width="5%">ID</td>
					<td width="15%">Фамилия</td>
					<td width="15%">Имя</td>
					<td width="5%">Класс</td>
					<td width="10%">Номер задачи</td>
					<td width="50%">Причина апелляции</td>
				</tr>
				{% for x in appeals %}
				<tr>
					<td>{{ x[0].student }}</td>
					<td>{{ x[1].name_1 }}</td>
					<td>{{ x[1].name_2 }}</td>
					<td>{{ x[1].class_name() }}</td>
					<td>{{ x[0].tasks }}</td>
					<td>{{ x[0].description }}</td>
				</tr>
				{% endfor %}
			</table>
		</center></td>
	</tr>
</table></center>

{% endblock %}
